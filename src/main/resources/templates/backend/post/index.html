<div th:replace="~{ backend/app :: layout(admin-posts, ~{::#main_card})}" xmlns:th="http://www.thymeleaf.org">
  <section class="content" id="main_card">
      <div class="card">
          <div class="card-body table-responsive p-0">
              <table class="table table-hover text-nowrap">
                  <thead>
                      <tr>
                          <th>
                              <input name="delete" id="toggle_checkbox" type="checkbox" onClick="toggle_checkbox()"/>
                          </th>
                          <th>ID</th>
                          <th>Title</th>
                          <th>Status</th>
                          <th>Type</th>
                          <th>Created At</th>
                          <th>Action</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr th:each="post, state:${page.getContent()}">
                          <td><input name="ids[]" type="checkbox" th:value="${post.id}" class="delete_checkbox"/></td>
                          <th th:text="${state.count}" class="ps-2">post id</th>
                          <td><a href="#" target="_blank" th:text="${post.title}">post tile</a></td>
                          <td th:text="${post.status}">post status</td>
                          <td th:text="${post.type}">post type</td>
                          <td th:text="${post.created_at}">post created_at</td>
                          <td class="center">
                              <a href="#" class="text-sm">
                                  Edit
                              </a>
                              <a class="text-sm pl-2" href="#">
                                  Remove
                              </a>
                          </td>
                      </tr>
                  </tbody>
              </table>
              <div th:replace="~{fragment::#pagination-container}"></div>
          </div>
          <!-- /.card-body -->
          <div class="card-footer">
              <button type="submit" class="btn btn-default" onclick="batch_delete();">Batch Delete</button>
          </div>
      </div>
  </section>
</div>
<script id="js">
    function toggle_checkbox() {
        if ($("#toggle_checkbox").prop('checked')) {
            $(".delete_checkbox").prop("checked", true);
        } else {
            $(".delete_checkbox").prop("checked", false);
        }
    }

    function batch_delete() {
        let ids = $('.delete_checkbox:checked').map(function () {
            return $(this).val();
        }).get();
        if (ids.length > 0) {
            do_delete(ids);
        } else {
            alert('Please select which records you want to delete');
        }
    }

    function do_delete(ids) {
        console.log(ids);
    }
</script>

